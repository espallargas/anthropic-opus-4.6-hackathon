export const countryCentroids: Record<string, { lat: number; lng: number; name: string }> = {
  AD: { lat: 42.5, lng: 1.5, name: 'Andorra' },
  AE: { lat: 23.4, lng: 53.8, name: 'United Arab Emirates' },
  AF: { lat: 33.9, lng: 67.0, name: 'Afghanistan' },
  AG: { lat: 17.0, lng: -61.8, name: 'Antigua and Barbuda' },
  AI: { lat: 18.2, lng: -63.1, name: 'Anguilla' },
  AL: { lat: 41.1, lng: 20.2, name: 'Albania' },
  AM: { lat: 40.1, lng: 45.0, name: 'Armenia' },
  AO: { lat: -11.2, lng: 17.9, name: 'Angola' },
  AQ: { lat: -90.0, lng: 0.0, name: 'Antarctica' },
  AR: { lat: -38.4, lng: -63.6, name: 'Argentina' },
  AS: { lat: -13.8, lng: -172.5, name: 'American Samoa' },
  AT: { lat: 47.5, lng: 14.5, name: 'Austria' },
  AU: { lat: -25.3, lng: 133.8, name: 'Australia' },
  AW: { lat: 12.2, lng: -69.0, name: 'Aruba' },
  AX: { lat: 60.5, lng: 20.0, name: 'Åland Islands' },
  AZ: { lat: 40.1, lng: 47.6, name: 'Azerbaijan' },
  BA: { lat: 43.9, lng: 17.7, name: 'Bosnia and Herzegovina' },
  BB: { lat: 13.2, lng: -59.5, name: 'Barbados' },
  BD: { lat: 23.7, lng: 90.4, name: 'Bangladesh' },
  BE: { lat: 50.5, lng: 4.5, name: 'Belgium' },
  BF: { lat: 12.2, lng: -1.6, name: 'Burkina Faso' },
  BG: { lat: 42.7, lng: 25.5, name: 'Bulgaria' },
  BH: { lat: 26.1, lng: 50.6, name: 'Bahrain' },
  BI: { lat: -3.4, lng: 29.9, name: 'Burundi' },
  BJ: { lat: 9.3, lng: 2.3, name: 'Benin' },
  BL: { lat: 17.9, lng: -62.8, name: 'Saint Barthélemy' },
  BM: { lat: 32.3, lng: -64.8, name: 'Bermuda' },
  BN: { lat: 4.5, lng: 114.6, name: 'Brunei' },
  BO: { lat: -16.3, lng: -63.6, name: 'Bolivia' },
  BQ: { lat: 12.2, lng: -68.3, name: 'Bonaire, Sint Eustatius and Saba' },
  BR: { lat: -14.2, lng: -51.9, name: 'Brazil' },
  BS: { lat: 24.2, lng: -76.0, name: 'Bahamas' },
  BT: { lat: 27.5, lng: 90.5, name: 'Bhutan' },
  BV: { lat: -54.4, lng: 3.4, name: 'Bouvet Island' },
  BW: { lat: -22.3, lng: 24.7, name: 'Botswana' },
  BY: { lat: 53.7, lng: 27.9, name: 'Belarus' },
  BZ: { lat: 17.2, lng: -88.8, name: 'Belize' },
  CA: { lat: 56.1, lng: -106.3, name: 'Canada' },
  CC: { lat: -12.2, lng: 96.9, name: 'Cocos Islands' },
  CD: { lat: -4.0, lng: 21.8, name: 'Congo' },
  CF: { lat: 6.6, lng: 20.9, name: 'Central African Republic' },
  CG: { lat: -4.0, lng: 21.8, name: 'Congo' },
  CH: { lat: 46.8, lng: 8.2, name: 'Switzerland' },
  CI: { lat: 7.5, lng: -5.5, name: "Côte d'Ivoire" },
  CK: { lat: -21.2, lng: -159.8, name: 'Cook Islands' },
  CL: { lat: -35.7, lng: -71.5, name: 'Chile' },
  CM: { lat: 3.9, lng: 11.5, name: 'Cameroon' },
  CN: { lat: 35.9, lng: 104.1, name: 'China' },
  CO: { lat: 4.6, lng: -74.1, name: 'Colombia' },
  CR: { lat: 9.7, lng: -83.8, name: 'Costa Rica' },
  CU: { lat: 21.5, lng: -77.8, name: 'Cuba' },
  CV: { lat: 16.1, lng: -23.6, name: 'Cape Verde' },
  CW: { lat: 12.2, lng: -69.0, name: 'Curaçao' },
  CX: { lat: -10.5, lng: 105.7, name: 'Christmas Island' },
  CY: { lat: 35.1, lng: 33.4, name: 'Cyprus' },
  CZ: { lat: 49.8, lng: 15.5, name: 'Czech Republic' },
  DE: { lat: 51.2, lng: 10.5, name: 'Germany' },
  DJ: { lat: 11.8, lng: 42.6, name: 'Djibouti' },
  DK: { lat: 56.3, lng: 9.5, name: 'Denmark' },
  DM: { lat: 15.4, lng: -61.4, name: 'Dominica' },
  DO: { lat: 18.7, lng: -70.2, name: 'Dominican Republic' },
  DZ: { lat: 28.0, lng: 1.7, name: 'Algeria' },
  EC: { lat: -1.8, lng: -78.2, name: 'Ecuador' },
  EE: { lat: 58.6, lng: 25.0, name: 'Estonia' },
  EG: { lat: 26.8, lng: 30.8, name: 'Egypt' },
  EH: { lat: 24.2, lng: -13.2, name: 'Western Sahara' },
  ER: { lat: 15.2, lng: 39.8, name: 'Eritrea' },
  ES: { lat: 40.5, lng: -3.7, name: 'Spain' },
  ET: { lat: 9.1, lng: 40.5, name: 'Ethiopia' },
  FI: { lat: 61.9, lng: 25.7, name: 'Finland' },
  FJ: { lat: -17.7, lng: 178.0, name: 'Fiji' },
  FK: { lat: -51.8, lng: -59.5, name: 'Falkland Islands' },
  FM: { lat: 7.4, lng: 150.5, name: 'Micronesia' },
  FO: { lat: 62.0, lng: -7.0, name: 'Faroe Islands' },
  FR: { lat: 46.2, lng: 2.2, name: 'France' },
  GA: { lat: -0.8, lng: 11.6, name: 'Gabon' },
  GB: { lat: 55.4, lng: -3.4, name: 'United Kingdom' },
  GD: { lat: 12.0, lng: -61.7, name: 'Grenada' },
  GE: { lat: 42.3, lng: 43.4, name: 'Georgia' },
  GF: { lat: 3.9, lng: -53.1, name: 'French Guiana' },
  GG: { lat: 49.5, lng: -2.1, name: 'Guernsey' },
  GH: { lat: 7.4, lng: -1.0, name: 'Ghana' },
  GI: { lat: 36.1, lng: -5.3, name: 'Gibraltar' },
  GL: { lat: 72.0, lng: -40.0, name: 'Greenland' },
  GM: { lat: 13.5, lng: -14.7, name: 'Gambia' },
  GN: { lat: 9.9, lng: -9.7, name: 'Guinea' },
  GP: { lat: 16.3, lng: -61.5, name: 'Guadeloupe' },
  GQ: { lat: 1.7, lng: 10.3, name: 'Equatorial Guinea' },
  GR: { lat: 39.1, lng: 21.8, name: 'Greece' },
  GS: { lat: -54.5, lng: -36.8, name: 'South Georgia and the South Sandwich Islands' },
  GT: { lat: 15.8, lng: -90.2, name: 'Guatemala' },
  GU: { lat: 13.4, lng: 144.8, name: 'Guam' },
  GW: { lat: 11.8, lng: -15.1, name: 'Guinea-Bissau' },
  GY: { lat: 4.8, lng: -58.9, name: 'Guyana' },
  HK: { lat: 22.4, lng: 114.1, name: 'Hong Kong' },
  HM: { lat: -53.1, lng: 72.5, name: 'Heard Island and McDonald Islands' },
  HN: { lat: 15.2, lng: -86.2, name: 'Honduras' },
  HR: { lat: 45.1, lng: 15.2, name: 'Croatia' },
  HT: { lat: 18.9, lng: -72.3, name: 'Haiti' },
  HU: { lat: 47.2, lng: 19.5, name: 'Hungary' },
  ID: { lat: -0.8, lng: 113.9, name: 'Indonesia' },
  IE: { lat: 53.4, lng: -8.2, name: 'Ireland' },
  IL: { lat: 31.0, lng: 34.9, name: 'Israel' },
  IM: { lat: 54.2, lng: -4.5, name: 'Isle of Man' },
  IN: { lat: 20.6, lng: 78.9, name: 'India' },
  IO: { lat: -6.3, lng: 71.9, name: 'British Indian Ocean Territory' },
  IQ: { lat: 33.2, lng: 43.7, name: 'Iraq' },
  IR: { lat: 32.4, lng: 53.7, name: 'Iran' },
  IS: { lat: 64.9, lng: -19.0, name: 'Iceland' },
  IT: { lat: 41.9, lng: 12.6, name: 'Italy' },
  JE: { lat: 49.2, lng: -2.1, name: 'Jersey' },
  JM: { lat: 18.1, lng: -77.3, name: 'Jamaica' },
  JO: { lat: 30.6, lng: 36.2, name: 'Jordan' },
  JP: { lat: 36.2, lng: 138.2, name: 'Japan' },
  KE: { lat: -0.0, lng: 37.9, name: 'Kenya' },
  KG: { lat: 41.7, lng: 74.6, name: 'Kyrgyzstan' },
  KH: { lat: 12.6, lng: 104.9, name: 'Cambodia' },
  KI: { lat: 1.3, lng: 173.0, name: 'Kiribati' },
  KM: { lat: -11.9, lng: 43.3, name: 'Comoros' },
  KN: { lat: 17.4, lng: -62.8, name: 'Saint Kitts and Nevis' },
  KP: { lat: 40.3, lng: 127.1, name: 'North Korea' },
  KR: { lat: 35.9, lng: 127.8, name: 'South Korea' },
  KW: { lat: 29.3, lng: 47.5, name: 'Kuwait' },
  KY: { lat: 19.3, lng: -81.4, name: 'Cayman Islands' },
  KZ: { lat: 48.0, lng: 66.9, name: 'Kazakhstan' },
  LA: { lat: 19.9, lng: 102.6, name: 'Laos' },
  LB: { lat: 33.9, lng: 35.5, name: 'Lebanon' },
  LC: { lat: 13.9, lng: -61.0, name: 'Saint Lucia' },
  LI: { lat: 47.2, lng: 9.6, name: 'Liechtenstein' },
  LK: { lat: 7.9, lng: 80.8, name: 'Sri Lanka' },
  LR: { lat: 6.4, lng: -9.4, name: 'Liberia' },
  LS: { lat: -29.6, lng: 28.2, name: 'Lesotho' },
  LT: { lat: 55.2, lng: 23.9, name: 'Lithuania' },
  LU: { lat: 49.8, lng: 6.2, name: 'Luxembourg' },
  LV: { lat: 56.9, lng: 24.7, name: 'Latvia' },
  LY: { lat: 26.3, lng: 17.2, name: 'Libya' },
  MA: { lat: 31.8, lng: -3.0, name: 'Morocco' },
  MC: { lat: 43.7, lng: 7.4, name: 'Monaco' },
  MD: { lat: 47.4, lng: 28.4, name: 'Moldova' },
  ME: { lat: 42.7, lng: 19.4, name: 'Montenegro' },
  MF: { lat: 18.1, lng: -63.1, name: 'Saint Martin' },
  MG: { lat: -18.7, lng: 46.9, name: 'Madagascar' },
  MH: { lat: 7.1, lng: 171.2, name: 'Marshall Islands' },
  MK: { lat: 41.6, lng: 21.7, name: 'North Macedonia' },
  ML: { lat: 17.6, lng: -4.0, name: 'Mali' },
  MM: { lat: 21.9, lng: 95.9, name: 'Myanmar' },
  MN: { lat: 46.9, lng: 103.8, name: 'Mongolia' },
  MO: { lat: 22.2, lng: 113.5, name: 'Macao' },
  MP: { lat: 15.0, lng: 145.6, name: 'Northern Mariana Islands' },
  MQ: { lat: 14.6, lng: -61.0, name: 'Martinique' },
  MR: { lat: 21.0, lng: -10.9, name: 'Mauritania' },
  MS: { lat: 16.7, lng: -62.2, name: 'Montserrat' },
  MT: { lat: 35.9, lng: 14.4, name: 'Malta' },
  MU: { lat: -20.3, lng: 57.5, name: 'Mauritius' },
  MV: { lat: 4.2, lng: 73.5, name: 'Maldives' },
  MW: { lat: -13.3, lng: 34.3, name: 'Malawi' },
  MX: { lat: 23.6, lng: -102.5, name: 'Mexico' },
  MY: { lat: 4.2, lng: 101.7, name: 'Malaysia' },
  MZ: { lat: -18.7, lng: 35.3, name: 'Mozambique' },
  NA: { lat: -22.6, lng: 17.1, name: 'Namibia' },
  NC: { lat: -20.9, lng: 165.6, name: 'New Caledonia' },
  NE: { lat: 17.6, lng: 8.7, name: 'Niger' },
  NF: { lat: -29.0, lng: 167.9, name: 'Norfolk Island' },
  NG: { lat: 9.1, lng: 8.7, name: 'Nigeria' },
  NI: { lat: 12.9, lng: -85.2, name: 'Nicaragua' },
  NL: { lat: 52.1, lng: 5.3, name: 'Netherlands' },
  NO: { lat: 60.5, lng: 8.5, name: 'Norway' },
  NP: { lat: 28.4, lng: 84.1, name: 'Nepal' },
  NR: { lat: -0.5, lng: 166.9, name: 'Nauru' },
  NU: { lat: -19.1, lng: -169.9, name: 'Niue' },
  NZ: { lat: -40.9, lng: 174.9, name: 'New Zealand' },
  OM: { lat: 21.4, lng: 55.9, name: 'Oman' },
  PA: { lat: 8.8, lng: -80.9, name: 'Panama' },
  PE: { lat: -9.2, lng: -75.7, name: 'Peru' },
  PF: { lat: -17.6, lng: -149.6, name: 'French Polynesia' },
  PG: { lat: -6.3, lng: 143.9, name: 'Papua New Guinea' },
  PH: { lat: 12.9, lng: 121.8, name: 'Philippines' },
  PK: { lat: 30.8, lng: 69.3, name: 'Pakistan' },
  PL: { lat: 51.9, lng: 19.1, name: 'Poland' },
  PM: { lat: 46.8, lng: -56.3, name: 'Saint Pierre and Miquelon' },
  PN: { lat: -24.7, lng: -127.4, name: 'Pitcairn' },
  PR: { lat: 18.2, lng: -66.5, name: 'Puerto Rico' },
  PS: { lat: 31.9, lng: 35.2, name: 'Palestine' },
  PT: { lat: 39.4, lng: -8.2, name: 'Portugal' },
  PW: { lat: 7.3, lng: 134.5, name: 'Palau' },
  PY: { lat: -23.4, lng: -58.4, name: 'Paraguay' },
  QA: { lat: 25.4, lng: 51.2, name: 'Qatar' },
  RE: { lat: -21.1, lng: 55.5, name: 'Réunion' },
  RO: { lat: 45.9, lng: 24.9, name: 'Romania' },
  RS: { lat: 44.0, lng: 21.0, name: 'Serbia' },
  RU: { lat: 61.5, lng: 105.3, name: 'Russia' },
  RW: { lat: -1.9, lng: 29.9, name: 'Rwanda' },
  SA: { lat: 23.9, lng: 45.1, name: 'Saudi Arabia' },
  SB: { lat: -9.6, lng: 160.2, name: 'Solomon Islands' },
  SC: { lat: -4.7, lng: 55.5, name: 'Seychelles' },
  SD: { lat: 12.9, lng: 30.2, name: 'Sudan' },
  SE: { lat: 60.1, lng: 18.6, name: 'Sweden' },
  SG: { lat: 1.3, lng: 103.8, name: 'Singapore' },
  SH: { lat: -15.9, lng: -5.7, name: 'Saint Helena' },
  SI: { lat: 46.2, lng: 14.9, name: 'Slovenia' },
  SJ: { lat: 74.0, lng: 20.0, name: 'Svalbard and Jan Mayen' },
  SK: { lat: 48.7, lng: 19.2, name: 'Slovakia' },
  SL: { lat: 8.5, lng: -11.8, name: 'Sierra Leone' },
  SM: { lat: 43.9, lng: 12.4, name: 'San Marino' },
  SN: { lat: 14.5, lng: -14.5, name: 'Senegal' },
  SO: { lat: 5.0, lng: 46.2, name: 'Somalia' },
  SR: { lat: 3.9, lng: -56.0, name: 'Suriname' },
  SS: { lat: 6.9, lng: 31.3, name: 'South Sudan' },
  ST: { lat: 0.3, lng: 6.7, name: 'São Tomé and Príncipe' },
  SV: { lat: 13.8, lng: -88.9, name: 'El Salvador' },
  SX: { lat: 18.0, lng: -63.0, name: 'Sint Maarten' },
  SY: { lat: 34.8, lng: 38.9, name: 'Syria' },
  SZ: { lat: -26.5, lng: 31.5, name: 'Eswatini' },
  TC: { lat: 21.9, lng: -71.8, name: 'Turks and Caicos Islands' },
  TD: { lat: 15.5, lng: 18.7, name: 'Chad' },
  TF: { lat: -49.3, lng: 69.2, name: 'French Southern Territories' },
  TG: { lat: 6.1, lng: 0.8, name: 'Togo' },
  TH: { lat: 15.9, lng: 100.9, name: 'Thailand' },
  TJ: { lat: 38.8, lng: 71.3, name: 'Tajikistan' },
  TK: { lat: -9.4, lng: -171.9, name: 'Tokelau' },
  TL: { lat: -8.9, lng: 125.7, name: 'Timor-Leste' },
  TM: { lat: 38.9, lng: 59.6, name: 'Turkmenistan' },
  TN: { lat: 33.9, lng: 9.5, name: 'Tunisia' },
  TO: { lat: -21.2, lng: -175.2, name: 'Tonga' },
  TR: { lat: 38.9, lng: 35.2, name: 'Turkey' },
  TT: { lat: 10.7, lng: -61.2, name: 'Trinidad and Tobago' },
  TV: { lat: -7.1, lng: 177.6, name: 'Tuvalu' },
  TW: { lat: 23.7, lng: 120.9, name: 'Taiwan' },
  TZ: { lat: -6.4, lng: 34.9, name: 'Tanzania' },
  UA: { lat: 48.4, lng: 31.2, name: 'Ukraine' },
  UG: { lat: 1.4, lng: 32.3, name: 'Uganda' },
  UM: { lat: 19.3, lng: 166.6, name: 'United States Minor Outlying Islands' },
  US: { lat: 37.0, lng: -95.7, name: 'United States' },
  UY: { lat: -32.5, lng: -55.8, name: 'Uruguay' },
  UZ: { lat: 41.4, lng: 64.6, name: 'Uzbekistan' },
  VA: { lat: 41.9, lng: 12.5, name: 'Vatican City' },
  VC: { lat: 12.9, lng: -61.3, name: 'Saint Vincent and the Grenadines' },
  VE: { lat: 6.4, lng: -66.6, name: 'Venezuela' },
  VG: { lat: 18.4, lng: -64.6, name: 'British Virgin Islands' },
  VI: { lat: 18.3, lng: -64.9, name: 'United States Virgin Islands' },
  VN: { lat: 14.1, lng: 108.8, name: 'Vietnam' },
  VU: { lat: -16.6, lng: 167.6, name: 'Vanuatu' },
  WF: { lat: -13.2, lng: -176.2, name: 'Wallis and Futuna' },
  WS: { lat: -13.7, lng: -172.1, name: 'Samoa' },
  YE: { lat: 15.4, lng: 48.5, name: 'Yemen' },
  YT: { lat: -12.8, lng: 45.2, name: 'Mayotte' },
  ZA: { lat: -30.5, lng: 22.9, name: 'South Africa' },
  ZM: { lat: -13.1, lng: 27.8, name: 'Zambia' },
  ZW: { lat: -19.0, lng: 29.2, name: 'Zimbabwe' },
};

export function getCountryName(code: string | undefined): string {
  if (!code) return '';
  return countryCentroids[code]?.name ?? code;
}

export function getCountryNameLocalized(
  code: string | undefined,
  t: (key: string) => string,
): string {
  if (!code) return '';
  const key = `countries.${code.toLowerCase()}`;
  const translated = t(key);
  // If translation not found, t() returns the key itself, so check if it's different
  if (translated !== key) {
    return translated;
  }
  // Fallback to English name from centroids
  return countryCentroids[code]?.name ?? code.toUpperCase();
}

export function countryCodeToFlag(code: string): string {
  return code
    .toUpperCase()
    .split('')
    .map((c) => String.fromCodePoint(c.charCodeAt(0) + 127397))
    .join('');
}
